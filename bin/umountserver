#!/bin/zsh

nomhd=0
nom2hd=0
noshare=0
nomedia=0
notorrents=0
nowww=0

function parsearg()
{
    case $1 in
        "nomhd")
            nomhd=1;;
        "nom2hd")
            nom2hd=1;;
        "noshare")
            noshare=1;;
        "nomedia")
            nomedia=1
            nomhd=1
            nom2hd=1;;
        "notorrents")
            notorrents=1;;
        "nowww")
            nowww=1;;
    esac
}

for arg in "${*[@]}"; do
    parsearg $arg
done

[[ $noshare    == 0 ]] && umount /share/eihort
[[ $nomedia    == 0 ]] && umount /share/eihort-media
[[ $notorrents == 0 ]] && umount /share/eihort-torrents
[[ $nowww      == 0 ]] && umount /share/eihort-www

[[ $nomhd      == 0 ]] && rm /media/MHD
[[ $nom2hd     == 0 ]] && rm /media/M2HD

[[ $nomhd      == 0 ]] && mkdir /media/MHD
[[ $nom2hd     == 0 ]] && mkdir /media/M2HD

[[ $nomhd      == 0 ]] && chmod 777 /media/MHD
[[ $nom2hd     == 0 ]] && chmod 777 /media/M2HD

[[ $nomhd      == 0 ]] && sudo -u barrucadu pmount /media/MHD
[[ $nom2hd     == 0 ]] && sudo -u barrucadu pmount /media/M2HD
