#!/bin/zsh

# Colours
autoload colors zsh/terminfo
if [[ "$terminfo[colors]" -ge 8 ]]; then
        colors
fi

for color in RED GREEN YELLOW BLUE MAGENTA CYAN WHITE; do
        eval PR_$color='$terminfo[bold]$fg[${(L)color}]'
        eval PR_LIGHT_$color='$fg[${(L)color}]'
        (( count = $count + 1 ))
done

PR_NO_COLOR="$terminfo[sgr0]"

# Config parsing
WM=`grep -E "[^#]exec" ~/.xinitrc`
niceWM=""
case "$WM" in
	*stumpwm*)
		niceWM=StumpWM
		;;
	*scrotwm*)
		niceWM=ScrotWM
		;;
	*musca*)
		niceWM=Musca
		;;
	*xmonad*)
		niceWM=Xmonad
		;;
	*)
		niceWM=`echo "$WM" | sed "s/.*exec//"`
		;;
esac

niceFont=`grep "gtk-font-name" ~/.gtkrc-2.0 | sed 's/.*="//' | sed 's/"//'`
niceIcons=`grep icon-theme-name .gtkrc.mine | sed "s/.* \"//" | sed "s/\"//"`

# Display
echo "                    ${PR_BLUE}       ,"
echo "                    ${PR_BLUE}      /#\\"
echo "                    ${PR_BLUE}     /###\\         ${PR_CYAN}OS:${PR_NO_COLOR}     ArchLinux x86_64"
echo "                    ${PR_BLUE}    /#####\\        ${PR_CYAN}Kernel:${PR_NO_COLOR} `uname -r`"
echo "                    ${PR_BLUE}   /##${PR_NO_COLOR}${PR_LIGHT_BLUE},-,##\\       ${PR_CYAN}WM:${PR_NO_COLOR}     $niceWM"
echo "                    ${PR_LIGHT_BLUE}  /##(   )##\\      ${PR_CYAN}GTK:${PR_NO_COLOR}    LiteGNOME (modified)"
echo "                    ${PR_LIGHT_BLUE} /#,--   --,#\\     ${PR_CYAN}Font:${PR_NO_COLOR}   $niceFont"
echo "                    ${PR_LIGHT_BLUE}/\`           \`\\${PR_NO_COLOR}    ${PR_CYAN}Icons:${PR_NO_COLOR}  $niceIcons"
colortheme