## -*- shell-script -*-

function command_not_found_handler() {
  if [[ -e $1 ]] && [[ -z $2 ]]; then
    # Open it if it's a text file.
    if file $1 | grep ' text\b' >/dev/null; then
      $EDITOR $1
    else
      file $1
    fi
  elif is_host $1 && [[ -z $2 ]]; then
    # SSH in if it's a network host.
    smartmosh $1
  elif has command-not-found; then
    # Use the nixos comamnd-not-found script to suggest a package, or
    # report the error if unknown.
    command-not-found $1
  else
    # Just tell the user off
    echo "$1: command not found" >&2
  fi
}
