#!/usr/bin/env bash

# Install a stack project from a git repository

dir=$(mktemp -d)

if git clone $1 $dir; then
    cd $dir
    if stack build --copy-bins; then
        rm -rf $dir
    else
        echo "Could not build project, see checkout in $dir." >&2
        exit 1
    fi
else
    echo "Could not clone repository, check URL." >&2
    rmdir $dir
fi
