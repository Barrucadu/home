#!/usr/bin/env zsh

WALLPAPERDIR=${1:-~/s/wallpaper}

if `xrandr -q --verbose | grep ' connected' | cut -d' ' -f6 | grep -q normal`; then
  WALLPAPERDIR="$WALLPAPERDIR/landscape"
else
  WALLPAPERDIR="$WALLPAPERDIR/portrait"
fi

if [[ ! -d $WALLPAPERDIR ]]; then
  echo "Missing wallpaper directory."
  exit
fi

feh --bg-tile "$WALLPAPERDIR/`ls $WALLPAPERDIR | shuf -n1`"
