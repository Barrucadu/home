#!/usr/bin/env bash

# Grab everything I use for Haskell devel.

dir=$(mktemp -d)
cd $dir

# Get stack
if which stack &>/dev/null; then
    echo "Using existing stack..."
else
    wget "https://www.stackage.org/stack/linux-x86_64"
    tar xf linux-x86_64
    cp $(tar tf linux-x86_64 | grep "/stack$") ~/.local/bin/stack
    chmod +x ~/.local/bin/stack
fi

# lamefun's patched haddock with new theme
stack-git https://gitlab.com/lamefun/haddock.git

# Syntax highlighting
stack build --copy-bins highlighting-kate hscolour --flag highlighting-kate:executable

# Linters & quality checkers
stack build --copy-bins argon hlint

# Preprocessors
stack build --copy-bins cpphs

# Misc
stack-git https://github.com/barrucadu/cabal-info.git

rm -r $dir
